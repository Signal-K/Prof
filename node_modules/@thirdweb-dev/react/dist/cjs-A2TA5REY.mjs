!function(o){o&&(void 0===o.global&&(o.global=o),void 0===o.globalThis&&(o.globalThis=o),void 0===o.process&&(o.process={env:{NODE_ENV:"production"}}))}("undefined"!=typeof window?window:void 0);
import{c as o,d as Ce,g as Xe}from"./chunk-I5QJ6ZQW.mjs";var pe=Xe((_a,dr)=>{var Et=Object.defineProperty,co=Object.getOwnPropertyDescriptor,uo=Object.getOwnPropertyNames,lo=Object.prototype.hasOwnProperty,fo=o(e=>Et(e,"__esModule",{value:!0}),"R"),ho=o((e,t)=>{for(var n in t)Et(e,n,{get:t[n],enumerable:!0})},"L"),po=o((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of uo(t))!lo.call(e,c)&&(n||c!=="default")&&Et(e,c,{get:()=>t[c],enumerable:!(s=co(t,c))||s.enumerable});return e},"x"),vo=(e=>(t,n)=>e&&e.get(t)||(n=po(fo({}),t,1),e&&e.set(t,n),n))(typeof WeakMap<"u"?new WeakMap:0),or={};ho(or,{EthChainType:()=>fr,MagicIncomingWindowMessage:()=>ur,MagicOutgoingWindowMessage:()=>lr,MagicPayloadMethod:()=>cr,RPCErrorCode:()=>sr,SDKErrorCode:()=>ir,SDKWarningCode:()=>ar});var ir=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(ir||{}),ar=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(ar||{}),sr=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(sr||{}),cr=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e))(cr||{}),ur=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(ur||{}),lr=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(lr||{}),fr=(e=>(e.Harmony="HARMONY",e))(fr||{});dr.exports=vo(or)});var st=Xe((ba,on)=>{var mo=Object.create,Be=Object.defineProperty,go=Object.defineProperties,yo=Object.getOwnPropertyDescriptor,Eo=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertyNames,hr=Object.getOwnPropertySymbols,bo=Object.getPrototypeOf,Ar=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable,pr=o((e,t,n)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"We"),wo=o((e,t)=>{for(var n in t||(t={}))Ar.call(t,n)&&pr(e,n,t[n]);if(hr)for(var n of hr(t))Io.call(t,n)&&pr(e,n,t[n]);return e},"Xe"),Ro=o((e,t)=>go(e,Eo(t)),"Be"),Lr=o(e=>Be(e,"__esModule",{value:!0}),"He"),So=o((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),"At"),Tr=o((e,t)=>{for(var n in t)Be(e,n,{get:t[n],enumerable:!0})},"Ve"),$r=o((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of _o(t))!Ar.call(e,c)&&(n||c!=="default")&&Be(e,c,{get:()=>t[c],enumerable:!(s=yo(t,c))||s.enumerable});return e},"ze"),Oo=o((e,t)=>$r(Lr(Be(e!=null?mo(bo(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),"Lt"),Mo=(e=>(t,n)=>e&&e.get(t)||(n=$r(Lr({}),t,1),e&&e.set(t,n),n))(typeof WeakMap<"u"?new WeakMap:0),me=o((e,t,n)=>new Promise((s,c)=>{var u=o(y=>{try{m(n.next(y))}catch(g){c(g)}},"o"),b=o(y=>{try{m(n.throw(y))}catch(g){c(g)}},"a"),m=o(y=>y.done?s(y.value):Promise.resolve(y.value).then(u,b),"i");m((n=n.apply(e,t)).next())}),"P"),No=So((e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty,s="~";function c(){}o(c,"Y"),Object.create&&(c.prototype=Object.create(null),new c().__proto__||(s=!1));function u(g,v,M){this.fn=g,this.context=v,this.once=M||!1}o(u,"An");function b(g,v,M,j,F){if(typeof M!="function")throw new TypeError("The listener must be a function");var S=new u(M,j||g,F),L=s?s+v:v;return g._events[L]?g._events[L].fn?g._events[L]=[g._events[L],S]:g._events[L].push(S):(g._events[L]=S,g._eventsCount++),g}o(b,"mt");function m(g,v){--g._eventsCount===0?g._events=new c:delete g._events[v]}o(m,"le");function y(){this._events=new c,this._eventsCount=0}o(y,"g"),y.prototype.eventNames=function(){var g=[],v,M;if(this._eventsCount===0)return g;for(M in v=this._events)n.call(v,M)&&g.push(s?M.slice(1):M);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(v)):g},y.prototype.listeners=function(g){var v=s?s+g:g,M=this._events[v];if(!M)return[];if(M.fn)return[M.fn];for(var j=0,F=M.length,S=new Array(F);j<F;j++)S[j]=M[j].fn;return S},y.prototype.listenerCount=function(g){var v=s?s+g:g,M=this._events[v];return M?M.fn?1:M.length:0},y.prototype.emit=function(g,v,M,j,F,S){var L=s?s+g:g;if(!this._events[L])return!1;var A=this._events[L],G=arguments.length,V,C;if(A.fn){switch(A.once&&this.removeListener(g,A.fn,void 0,!0),G){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,v),!0;case 3:return A.fn.call(A.context,v,M),!0;case 4:return A.fn.call(A.context,v,M,j),!0;case 5:return A.fn.call(A.context,v,M,j,F),!0;case 6:return A.fn.call(A.context,v,M,j,F,S),!0}for(C=1,V=new Array(G-1);C<G;C++)V[C-1]=arguments[C];A.fn.apply(A.context,V)}else{var le=A.length,W;for(C=0;C<le;C++)switch(A[C].once&&this.removeListener(g,A[C].fn,void 0,!0),G){case 1:A[C].fn.call(A[C].context);break;case 2:A[C].fn.call(A[C].context,v);break;case 3:A[C].fn.call(A[C].context,v,M);break;case 4:A[C].fn.call(A[C].context,v,M,j);break;default:if(!V)for(W=1,V=new Array(G-1);W<G;W++)V[W-1]=arguments[W];A[C].fn.apply(A[C].context,V)}}return!0},y.prototype.on=function(g,v,M){return b(this,g,v,M,!1)},y.prototype.once=function(g,v,M){return b(this,g,v,M,!0)},y.prototype.removeListener=function(g,v,M,j){var F=s?s+g:g;if(!this._events[F])return this;if(!v)return m(this,F),this;var S=this._events[F];if(S.fn)S.fn===v&&(!j||S.once)&&(!M||S.context===M)&&m(this,F);else{for(var L=0,A=[],G=S.length;L<G;L++)(S[L].fn!==v||j&&!S[L].once||M&&S[L].context!==M)&&A.push(S[L]);A.length?this._events[F]=A.length===1?A[0]:A:m(this,F)}return this},y.prototype.removeAllListeners=function(g){var v;return g?(v=s?s+g:g,this._events[v]&&m(this,v)):(this._events=new c,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=s,y.EventEmitter=y,typeof t<"u"&&(t.exports=y)}),Pr={};Tr(Pr,{Extension:()=>Le,MagicExtensionError:()=>Ot,MagicExtensionWarning:()=>bt,MagicRPCError:()=>ke,MagicSDKError:()=>_e,MagicSDKWarning:()=>We,SDKBase:()=>nn,STORE_KEY_PRIVATE_KEY:()=>at,STORE_KEY_PUBLIC_JWK:()=>Fe,TypedEmitter:()=>Xr,ViewController:()=>Qi,clearKeys:()=>Zr,createDeprecationWarning:()=>Ri,createDuplicateIframeWarning:()=>wi,createExtensionNotInitializedError:()=>Br,createIncompatibleExtensionsError:()=>Gr,createInvalidArgumentError:()=>Wr,createJwt:()=>en,createMalformedResponseError:()=>Fr,createMissingApiKeyError:()=>Ur,createModalNotReadyError:()=>Ii,createPromiEvent:()=>Lt,createPromise:()=>Tt,createReactNativeEndpointConfigurationWarning:()=>Kr,createSDK:()=>_i,createSynchronousWeb3MethodWarning:()=>qr,createTypedEmitter:()=>At,createURL:()=>wt,decodeJSON:()=>Dr,encodeJSON:()=>St,getPayloadId:()=>Mt,isEmpty:()=>rt,isJsonRpcErrorCode:()=>kr,isJsonRpcRequestPayload:()=>yi,isJsonRpcResponsePayload:()=>xr,isMagicPayloadMethod:()=>Ei,isPromiEvent:()=>Yr,storage:()=>$t,uuid:()=>Jr});function Ao(e){let t={exports:{}};return e(t,t.exports),t.exports}o(Ao,"Ot");var Lo=Number.MAX_SAFE_INTEGER||9007199254740991,Rt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Lo,MAX_SAFE_COMPONENT_LENGTH:16},To=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},z=To,Ge=Ao(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n}=Rt,s=(t=e.exports={}).re=[],c=t.src=[],u=t.t={},b=0,m=o((y,g,v)=>{let M=b++;z(M,g),u[y]=M,c[M]=g,s[M]=new RegExp(g,v?"g":void 0)},"i");m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","[0-9]+"),m("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),m("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER","[0-9A-Za-z-]+"),m("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),m("FULL",`^${c[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),m("LOOSE",`^${c[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),m("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),m("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),m("COERCERTL",c[u.COERCE],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0.0.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),vr=/^[0-9]+$/,Cr=o((e,t)=>{let n=vr.test(e),s=vr.test(t);return n&&s&&(e=+e,t=+t),e===t?0:n&&!s?-1:s&&!n?1:e<t?-1:1},"Ze"),$o=o((e,t)=>Cr(t,e),"Dt"),Po={compareIdentifiers:Cr,rcompareIdentifiers:$o},{MAX_LENGTH:mr,MAX_SAFE_INTEGER:Ve}=Rt,{re:gr,t:yr}=Ge,{compareIdentifiers:De}=Po,ee=o(class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>mr)throw new TypeError(`version is longer than ${mr} characters`);z("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?gr[yr.LOOSE]:gr[yr.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ve||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ve||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ve||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let c=+s;if(c>=0&&c<Ve)return c}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(z("SemVer.compare",this.version,this.options,e),!(e instanceof ee)){if(typeof e=="string"&&e===this.version)return 0;e=new ee(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ee||(e=new ee(e,this.options)),De(this.major,e.major)||De(this.minor,e.minor)||De(this.patch,e.patch)}comparePre(e){if(e instanceof ee||(e=new ee(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=e.prerelease[t];if(z("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n!==s)return De(n,s)}while(++t)}compareBuild(e){e instanceof ee||(e=new ee(e,this.options));let t=0;do{let n=this.build[t],s=e.build[t];if(z("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n!==s)return De(n,s)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},"E"),Co=o((e,t,n)=>new ee(e,n).compare(new ee(t,n)),"Jt"),Te=Co,Do=o((e,t,n)=>Te(e,t,n)===0,"qt"),jo=Do,xo=o((e,t,n)=>Te(e,t,n)!==0,"Ut"),ko=xo,Uo=o((e,t,n)=>Te(e,t,n)>0,"jt"),Fo=Uo,Bo=o((e,t,n)=>Te(e,t,n)>=0,"Wt"),Go=Bo,Wo=o((e,t,n)=>Te(e,t,n)<0,"Bt"),qo=Wo,Ko=o((e,t,n)=>Te(e,t,n)<=0,"Vt"),zo=Ko,Ho=o((e,t,n,s)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return jo(e,n,s);case"!=":return ko(e,n,s);case">":return Fo(e,n,s);case">=":return Go(e,n,s);case"<":return qo(e,n,s);case"<=":return zo(e,n,s);default:throw new TypeError(`Invalid operator: ${t}`)}},"Yt"),_t=Ho,je=Symbol("SemVer ANY"),xe=o(class{static get ANY(){return je}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof xe){if(e.loose===!!t.loose)return e;e=e.value}z("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===je?this.value="":this.value=this.operator+this.semver.version,z("comp",this)}parse(e){let t=this.options.loose?Er[_r.COMPARATORLOOSE]:Er[_r.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new ee(n[2],this.options.loose):this.semver=je}toString(){return this.value}test(e){if(z("Comparator.test",e,this.options.loose),this.semver===je||e===je)return!0;if(typeof e=="string")try{e=new ee(e,this.options)}catch{return!1}return _t(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof xe))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Ae(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Ae(this.value,t).test(e.semver);let n=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),s=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),c=this.semver.version===e.semver.version,u=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),b=_t(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),m=_t(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||s||c&&u||b||m}},"C"),{re:Er,t:_r}=Ge,Ae=o(class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ae(e.raw,t);if(e instanceof xe)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let n=t?re[te.HYPHENRANGELOOSE]:re[te.HYPHENRANGE];e=e.replace(n,ai(this.options.includePrerelease)),z("hyphen replace",e),e=e.replace(re[te.COMPARATORTRIM],Xo),z("comparator trim",e,re[te.COMPARATORTRIM]),e=(e=(e=e.replace(re[te.TILDETRIM],Vo)).replace(re[te.CARETTRIM],Yo)).split(/\s+/).join(" ");let s=t?re[te.COMPARATORLOOSE]:re[te.COMPARATOR];return e.split(" ").map(c=>Jo(c,this.options)).join(" ").split(/\s+/).map(c=>ii(c,this.options)).filter(this.options.loose?c=>!!c.match(s):()=>!0).map(c=>new xe(c,this.options))}intersects(e,t){if(!(e instanceof Ae))throw new TypeError("a Range is required");return this.set.some(n=>br(n,t)&&e.set.some(s=>br(s,t)&&n.every(c=>s.every(u=>c.intersects(u,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ee(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(si(this.set[t],e,this.options))return!0;return!1}},"S"),{re,t:te,comparatorTrimReplace:Xo,tildeTrimReplace:Vo,caretTrimReplace:Yo}=Ge,br=o((e,t)=>{let n=!0,s=e.slice(),c=s.pop();for(;n&&s.length;)n=s.every(u=>c.intersects(u,t)),c=s.pop();return n},"st"),Jo=o((e,t)=>(z("comp",e,t),e=ei(e,t),z("caret",e),e=Qo(e,t),z("tildes",e),e=ri(e,t),z("xrange",e),e=oi(e,t),z("stars",e),e),"tn"),ie=o(e=>!e||e.toLowerCase()==="x"||e==="*","R"),Qo=o((e,t)=>e.trim().split(/\s+/).map(n=>Zo(n,t)).join(" "),"nn"),Zo=o((e,t)=>{let n=t.loose?re[te.TILDELOOSE]:re[te.TILDE];return e.replace(n,(s,c,u,b,m)=>{let y;return z("tilde",e,s,c,u,b,m),ie(c)?y="":ie(u)?y=`>=${c}.0.0 <${+c+1}.0.0-0`:ie(b)?y=`>=${c}.${u}.0 <${c}.${+u+1}.0-0`:m?(z("replaceTilde pr",m),y=`>=${c}.${u}.${b}-${m} <${c}.${+u+1}.0-0`):y=`>=${c}.${u}.${b} <${c}.${+u+1}.0-0`,z("tilde return",y),y})},"rn"),ei=o((e,t)=>e.trim().split(/\s+/).map(n=>ti(n,t)).join(" "),"sn"),ti=o((e,t)=>{z("caret",e,t);let n=t.loose?re[te.CARETLOOSE]:re[te.CARET],s=t.includePrerelease?"-0":"";return e.replace(n,(c,u,b,m,y)=>{let g;return z("caret",e,c,u,b,m,y),ie(u)?g="":ie(b)?g=`>=${u}.0.0${s} <${+u+1}.0.0-0`:ie(m)?g=u==="0"?`>=${u}.${b}.0${s} <${u}.${+b+1}.0-0`:`>=${u}.${b}.0${s} <${+u+1}.0.0-0`:y?(z("replaceCaret pr",y),g=u==="0"?b==="0"?`>=${u}.${b}.${m}-${y} <${u}.${b}.${+m+1}-0`:`>=${u}.${b}.${m}-${y} <${u}.${+b+1}.0-0`:`>=${u}.${b}.${m}-${y} <${+u+1}.0.0-0`):(z("no pr"),g=u==="0"?b==="0"?`>=${u}.${b}.${m}${s} <${u}.${b}.${+m+1}-0`:`>=${u}.${b}.${m}${s} <${u}.${+b+1}.0-0`:`>=${u}.${b}.${m} <${+u+1}.0.0-0`),z("caret return",g),g})},"on"),ri=o((e,t)=>(z("replaceXRanges",e,t),e.split(/\s+/).map(n=>ni(n,t)).join(" ")),"an"),ni=o((e,t)=>{e=e.trim();let n=t.loose?re[te.XRANGELOOSE]:re[te.XRANGE];return e.replace(n,(s,c,u,b,m,y)=>{z("xRange",e,s,c,u,b,m,y);let g=ie(u),v=g||ie(b),M=v||ie(m),j=M;return c==="="&&j&&(c=""),y=t.includePrerelease?"-0":"",g?s=c===">"||c==="<"?"<0.0.0-0":"*":c&&j?(v&&(b=0),m=0,c===">"?(c=">=",v?(u=+u+1,b=0,m=0):(b=+b+1,m=0)):c==="<="&&(c="<",v?u=+u+1:b=+b+1),c==="<"&&(y="-0"),s=`${c+u}.${b}.${m}${y}`):v?s=`>=${u}.0.0${y} <${+u+1}.0.0-0`:M&&(s=`>=${u}.${b}.0${y} <${u}.${+b+1}.0-0`),z("xRange return",s),s})},"cn"),oi=o((e,t)=>(z("replaceStars",e,t),e.trim().replace(re[te.STAR],"")),"ln"),ii=o((e,t)=>(z("replaceGTE0",e,t),e.trim().replace(re[t.includePrerelease?te.GTE0PRE:te.GTE0],"")),"pn"),ai=o(e=>(t,n,s,c,u,b,m,y,g,v,M,j,F)=>`${n=ie(s)?"":ie(c)?`>=${s}.0.0${e?"-0":""}`:ie(u)?`>=${s}.${c}.0${e?"-0":""}`:b?`>=${n}`:`>=${n}${e?"-0":""}`} ${y=ie(g)?"":ie(v)?`<${+g+1}.0.0-0`:ie(M)?`<${g}.${+v+1}.0-0`:j?`<=${g}.${v}.${M}-${j}`:e?`<${g}.${v}.${+M+1}-0`:`<=${y}`}`.trim(),"un"),si=o((e,t,n)=>{for(let s=0;s<e.length;s++)if(!e[s].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let s=0;s<e.length;s++)if(z(e[s].semver),e[s].semver!==xe.ANY&&e[s].semver.prerelease.length>0){let c=e[s].semver;if(c.major===t.major&&c.minor===t.minor&&c.patch===t.patch)return!0}return!1}return!0},"dn"),ci=o((e,t,n)=>{try{t=new Ae(t,n)}catch{return!1}return t.test(e)},"ot"),{MAX_LENGTH:ui}=Rt,{re:Ir,t:wr}=Ge,li=o((e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee)return e;if(typeof e!="string"||e.length>ui||!(t.loose?Ir[wr.LOOSE]:Ir[wr.FULL]).test(e))return null;try{return new ee(e,t)}catch{return null}},"En"),fi=li,{re:Ye,t:Je}=Ge,di=o((e,t)=>{if(e instanceof ee)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let n=null;if((t=t||{}).rtl){let s;for(;(s=Ye[Je.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&s.index+s[0].length===n.index+n[0].length||(n=s),Ye[Je.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;Ye[Je.COERCERTL].lastIndex=-1}else n=e.match(Ye[Je.COERCE]);return n===null?null:fi(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)},"ct");function hi(e){return String.fromCharCode(parseInt(e.slice(1),16))}o(hi,"fn");function pi(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}o(pi,"yn");function vi(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,hi))}o(vi,"gn");function mi(e){return decodeURIComponent(Array.from(atob(e),pi).join(""))}o(mi,"Rn");function St(e){return vi(JSON.stringify(e))}o(St,"H");function Dr(e){return JSON.parse(mi(e))}o(Dr,"Te");var de=pe(),jr=pe();function ve(e){return typeof e>"u"}o(ve,"M");function gi(e){return e===null}o(gi,"Tn");function it(e){return gi(e)||ve(e)}o(it,"ae");function yi(e){return it(e)?!1:!ve(e.jsonrpc)&&!ve(e.id)&&!ve(e.method)&&!ve(e.params)}o(yi,"vn");function xr(e){return it(e)?!1:!ve(e.jsonrpc)&&!ve(e.id)&&(!ve(e.result)||!ve(e.error))}o(xr,"ve");function Ei(e){return it(e)?!1:typeof e=="string"&&Object.values(jr.MagicPayloadMethod).includes(e)}o(Ei,"xn");function kr(e){return it(e)?!1:typeof e=="number"&&Object.values(jr.RPCErrorCode).includes(e)}o(kr,"xe");function rt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}o(rt,"V");var Y={};function _i(e,t){return Object.assign(Y,t),e}o(_i,"lt");var bi={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn"},_e=o(class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,_e.prototype)}},"$"),ke=o(class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=kr(t)?t:de.RPCErrorCode.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,Object.setPrototypeOf(this,ke.prototype)}},"N"),We=o(class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},"q"),Ot=o(class extends Error{constructor(e,t,n,s){super(`Magic Extension Error (${e.name}): [${t}] ${n}`),this.code=t,this.rawMessage=n,this.data=s,this.__proto__=Error,Object.setPrototypeOf(this,Ot.prototype)}},"G"),bt=o(class{constructor(e,t,n){this.code=t,this.rawMessage=n,this.message=`Magic Extension Warning (${e.name}): [${t}] ${n}`}log(){console.warn(this.message)}},"z");function Ur(){return new _e(de.SDKErrorCode.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}o(Ur,"Ie");function Ii(){return new _e(de.SDKErrorCode.ModalNotReady,"Modal is not ready.")}o(Ii,"In");function Fr(){return new _e(de.SDKErrorCode.MalformedResponse,"Response from the Magic iframe is malformed.")}o(Fr,"Pe");function Br(e){return new _e(de.SDKErrorCode.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}o(Br,"$e");function Gr(e){let t=`Some extensions are incompatible with \`${Y.sdkName}@${Y.version}\`:`;return e.filter(n=>typeof n.compat<"u"&&n.compat!==null).forEach(n=>{let s=n.compat[Y.sdkName];typeof s=="string"?t+=`
  - Extension \`${n.name}\` supports version(s) \`${s}\``:s||(t+=`
  - Extension \`${n.name}\` does not support ${Y.platform} environments.`)}),new _e(de.SDKErrorCode.IncompatibleExtensions,t)}o(Gr,"be");function Wr(e){let t=o(n=>{let s=n+1,c=s%10,u=s%100;return c===1&&u!==11?`${s}st`:c===2&&u!==12?`${s}nd`:c===3&&u!==13?`${s}rd`:`${s}th`},"e");return new _e(de.SDKErrorCode.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}o(Wr,"Me");function wi(){return new We(de.SDKWarningCode.DuplicateIframe,"Duplicate iframes found.")}o(wi,"Pn");function qr(){return new We(de.SDKWarningCode.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}o(qr,"Ne");function Kr(){return new We(de.SDKWarningCode.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${Y.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}o(Kr,"we");function Ri(e){let{method:t,removalVersions:n,useInstead:s}=e,c=n[Y.sdkName],u=s?` Use \`${s}\` instead.`:"",b=`\`${t}\` will be removed from \`${Y.sdkName}\` in version \`${c}\`.${u}`;return new We(de.SDKWarningCode.DeprecationNotice,b)}o(Ri,"$n");var Ee=pe(),Rr=pe();function*Si(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}o(Si,"bn");var Oi=Si();function Mt(){return Oi.next().value}o(Mt,"ce");var zr=Symbol("Payload pre-processed by Magic SDK");function Hr(e){return Object.defineProperty(e,zr,{value:!0,enumerable:!1}),e}o(Hr,"dt");function Mi(e){return!!e[zr]}o(Mi,"Nn");function nt(e){var t,n,s;return Mi(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=Mt(),e.method=(n=e.method)!=null?n:"noop",e.params=(s=e.params)!=null?s:[],Hr(e)),e}o(nt,"_");function ue(e,t=[]){return Hr({params:t,method:e,jsonrpc:"2.0",id:Mt()})}o(ue,"h");var Nt=o(class{constructor(e){e instanceof Nt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):xr(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},"D"),Ni=Oo(No()),Xr=o(class extends Ni.default{},"Le");function At(){let e=new Xr;return{emitter:e,createChainingEmitterMethod:(t,n)=>(...s)=>(e[t].apply(e,s),n),createBoundEmitterMethod:t=>(...n)=>e[t].apply(e,n)}}o(At,"Z");var Vr=Symbol("isPromiEvent");function Yr(e){return!!e[Vr]}o(Yr,"Se");function Lt(e){let t=Tt(e),{createBoundEmitterMethod:n,createChainingEmitterMethod:s}=At(),c=Symbol("Promise.then"),u=Symbol("Promise.catch"),b=Symbol("Promise.finally"),m=o((v,M)=>(...j)=>{let F=M[v].apply(M,j);return y(F)},"i"),y=o(v=>Object.assign(v,{[Vr]:!0,[c]:v[c]||v.then,[u]:v[u]||v.catch,[b]:v[b]||v.finally,then:m(c,v),catch:m(u,v),finally:m(b,v),on:s("on",v),once:s("once",v),addListener:s("addListener",v),off:s("off",v),removeListener:s("removeListener",v),removeAllListeners:s("removeAllListeners",v),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),"c"),g=y(t.then(v=>(g.emit("done",v),g.emit("settled"),v),v=>{throw g.emit("error",v),g.emit("settled"),v}));return g}o(Lt,"Q");function Tt(e){return new Promise((t,n)=>{let s=e(t,n);Promise.resolve(s).catch(n)})}o(Tt,"pe");var qe=o(class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Rr.MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,nt(e)),n=Lt((c,u)=>{t.then(b=>{if(s(),b.hasError)u(new ke(b.payload.error));else if(b.hasResult)c(b.payload.result);else throw Fr()}).catch(b=>{s(),u(b)})}),s=this.overlay.on(Rr.MagicIncomingWindowMessage.MAGIC_HANDLE_EVENT,c=>{var u;let{response:b}=c.data;if(b.id===e.id&&((u=b.result)==null?void 0:u.event)){let{event:m,params:y=[]}=b.result;n.emit(m,...y)}});return n}},"b"),Ai=o(class extends qe{loginWithMagicLink(e){let{email:t,showUI:n=!0,redirectURI:s}=e,c=ue(this.sdk.testMode?Ee.MagicPayloadMethod.LoginWithMagicLinkTestMode:Ee.MagicPayloadMethod.LoginWithMagicLink,[{email:t,showUI:n,redirectURI:s}]);return this.request(c)}loginWithSMS(e){let{phoneNumber:t}=e,n=ue(this.sdk.testMode?Ee.MagicPayloadMethod.LoginWithSmsTestMode:Ee.MagicPayloadMethod.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(n)}loginWithEmailOTP(e){let{email:t}=e,n=ue(this.sdk.testMode?Ee.MagicPayloadMethod.LoginWithEmailOTPTestMode:Ee.MagicPayloadMethod.LoginWithEmailOTP,[{email:t,showUI:!0}]);return this.request(n)}loginWithCredential(e){let t=e!=null?e:"";if(!e&&Y.platform==="web"){t=window.location.search;let s=window.location.origin+window.location.pathname;window.history.replaceState(null,"",s)}let n=ue(this.sdk.testMode?Ee.MagicPayloadMethod.LoginWithCredentialTestMode:Ee.MagicPayloadMethod.LoginWithCredential,[t]);return this.request(n)}},"Oe"),ce=pe(),$t={};Tr($t,{clear:()=>Li,getItem:()=>Ue,iterate:()=>Ci,key:()=>$i,keys:()=>Pi,length:()=>Ti,removeItem:()=>It,setItem:()=>ot});var Qe;function be(e){return(...t)=>me(this,null,function*(){return Qe||(Qe=yield Y.configureStorage()),yield Qe.ready(),Qe[e](...t)})}o(be,"O");var Ue=be("getItem"),ot=be("setItem"),It=be("removeItem"),Li=be("clear"),Ti=be("length"),$i=be("key"),Pi=be("keys"),Ci=be("iterate");function Jr(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}o(Jr,"Ce");var at="STORE_KEY_PRIVATE_KEY",Fe="STORE_KEY_PUBLIC_JWK",Pt="ECDSA",Qr="P-256",Di={name:Pt,namedCurve:Qr},ji={name:Pt,namedCurve:Qr};function Zr(){It(Fe),It(at)}o(Zr,"De");function en(){return me(this,null,function*(){let e=yield xi();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,n=yield Ue(at);if(!n||!t){console.info("unable to find private key or webcrypto unsupported");return}let s={iat:Math.floor(new Date().getTime()/1e3),jti:Jr()},c={typ:"dpop+jwt",alg:"ES256",jwk:e},u={protected:Sr(JSON.stringify(c)),claims:Sr(JSON.stringify(s))},b=Fi(`${u.protected}.${u.claims}`),m={name:Pt,hash:{name:"SHA-256"}},y=Gi(new Uint8Array(yield t.sign(m,n,b)));return`${u.protected}.${u.claims}.${y}`})}o(en,"ke");function xi(){return me(this,null,function*(){if(!Ui()){console.info("webcrypto is not supported");return}return(yield Ue(Fe))||(yield ki()),Ue(Fe)})}o(xi,"Jn");function ki(){return me(this,null,function*(){let e=null,{subtle:t}=window.crypto,n=yield t.generateKey(Di,!0,["sign"]),s=yield t.exportKey("jwk",n.privateKey);e=yield t.exportKey("jwk",n.publicKey);let c=yield t.importKey("jwk",s,ji,!1,["sign"]);yield ot(at,c),yield ot(Fe,e)})}o(ki,"qn");function Ui(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}o(Ui,"Gn");function Sr(e){return tn(Bi(e))}o(Sr,"gt");function Fi(e){return new TextEncoder().encode(e)}o(Fi,"Un");function tn(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}o(tn,"Rt");function Bi(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}o(Bi,"Kn");function Gi(e){let t="";return e.forEach(n=>{t+=String.fromCharCode(n)}),tn(t)}o(Gi,"jn");var Wi=o(class extends qe{getIdToken(e){let t=ue(this.sdk.testMode?ce.MagicPayloadMethod.GetIdTokenTestMode:ce.MagicPayloadMethod.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=ue(this.sdk.testMode?ce.MagicPayloadMethod.GenerateIdTokenTestMode:ce.MagicPayloadMethod.GenerateIdToken,[e]);return this.request(t)}getMetadata(){let e=ue(this.sdk.testMode?ce.MagicPayloadMethod.GetMetadataTestMode:ce.MagicPayloadMethod.GetMetadata);return this.request(e)}updateEmail(e){let{email:t,showUI:n=!0}=e,s=ue(this.sdk.testMode?ce.MagicPayloadMethod.UpdateEmailTestMode:ce.MagicPayloadMethod.UpdateEmail,[{email:t,showUI:n}]);return this.request(s)}isLoggedIn(){let e=ue(this.sdk.testMode?ce.MagicPayloadMethod.IsLoggedInTestMode:ce.MagicPayloadMethod.IsLoggedIn);return this.request(e)}logout(){Zr();let e=ue(this.sdk.testMode?ce.MagicPayloadMethod.LogoutTestMode:ce.MagicPayloadMethod.Logout);return this.request(e)}showSettings(){let e=ue(this.sdk.testMode?ce.MagicPayloadMethod.UserSettingsTestMode:ce.MagicPayloadMethod.UserSettings);return this.request(e)}},"Je"),Or=pe(),{createBoundEmitterMethod:Ze,createChainingEmitterMethod:Ne}=At(),qi=o(class extends qe{constructor(){super(...arguments),this.isMagic=!0,this.on=Ne("on",this),this.once=Ne("once",this),this.addListener=Ne("addListener",this),this.off=Ne("off",this),this.removeListener=Ne("removeListener",this),this.removeAllListeners=Ne("removeAllListeners",this),this.emit=Ze("emit"),this.eventNames=Ze("eventNames"),this.listeners=Ze("listeners"),this.listenerCount=Ze("listenerCount")}sendAsync(e,t){if(!t)throw Wr({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Or.MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,e.map(n=>{let s=nt(n);return this.prefixPayloadMethodForTestMode(s),s})).then(n=>{t(null,n.map(s=>Ro(wo({},s.payload),{error:s.hasError?new ke(s.payload.error):null})))});else{let n=nt(e);this.prefixPayloadMethodForTestMode(n),this.overlay.post(Or.MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,n).then(s=>{t(s.hasError?new ke(s.payload.error):null,s.payload)})}}send(e,t){if(typeof e=="string"){let s=ue(e,Array.isArray(t)?t:[]);return this.request(s)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let n=qr();return n.log(),new Nt(e).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let e=ue("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}},"Ge");function wt(e,t){return t?new URL(e,t):new URL(e)}o(wt,"fe");var Mr=["request","overlay","sdk"];function Ki(e){let t=Object.getPrototypeOf(e),n=[t];for(;t!==qe.prototype;)t=Object.getPrototypeOf(t),n.push(t);return n}o(Ki,"Fn");var rn=o(class extends qe{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Lt,isPromiEvent:Yr,encodeJSON:St,decodeJSON:Dr,createJsonRpcRequestPayload:ue,standardizeJsonRpcRequestPayload:nt,storage:$t};let e=[this,...Ki(this)];Mr.forEach(t=>{let n=e.map(b=>Object.getOwnPropertyDescriptor(b,t)),s=n.findIndex(b=>!!b),c=s>0,u=n[s];u&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:u,isPrototypeField:c}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Br(t)}}))})}init(e){this.__is_initialized__||(Mr.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:n,isPrototypeField:s}=this.__sdk_access_field_descriptors__.get(t);s?delete this[t]:Object.defineProperty(this,t,n)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:n,useInstead:s}=e,c=s?` Use \`${s}\` instead.`:"",u=`\`${t}\` will be removed from this Extension in version \`${n}\`.${c}`;return new bt(this,"DEPRECATION_NOTICE",u)}createWarning(e,t){return new bt(this,e,t)}createError(e,t,n){return new Ot(this,e,t,n)}},"Ue"),zi=o(class extends rn{},"vt"),Le=o(class extends rn{},"A");Le.Internal=zi,Le.Anonymous="anonymous extension";function Nr(e){return e.compat&&e.compat[Y.sdkName]!=null?typeof e.compat[Y.sdkName]=="string"?ci(di(Y.version),e.compat[Y.sdkName]):!!e.compat[Y.sdkName]:!0}o(Nr,"xt");function Hi(e){var t;let n=(t=e==null?void 0:e.extensions)!=null?t:[],s={},c=[];if(Array.isArray(n)?n.forEach(u=>{Nr(u)?(u.init(this),(u.name||u.name!==Le.Anonymous)&&(this[u.name]=u),u instanceof Le.Internal&&(rt(u.config)||(s[u.name]=u.config))):c.push(u)}):Object.keys(n).forEach(u=>{if(Nr(n[u])){n[u].init(this);let b=n[u];this[u]=b,b instanceof Le.Internal&&(rt(b.config)||(s[n[u].name]=b.config))}else c.push(n[u])}),c.length)throw Gr(c);return s}o(Hi,"Wn");var tt=o(class{constructor(e,t){this.apiKey=e;var n;if(!e)throw Ur();Y.platform==="react-native"&&(t==null?void 0:t.endpoint)&&Kr().log();let{defaultEndpoint:s,version:c}=Y;this.testMode=!!(t!=null&&t.testMode),this.endpoint=wt((n=t==null?void 0:t.endpoint)!=null?n:s).origin,this.auth=new Ai(this),this.user=new Wi(this),this.rpcProvider=new qi(this);let u=Hi.call(this,t);this.parameters=St({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:wt(this.endpoint).host,sdk:bi[Y.sdkName],version:c,ext:rt(u)?void 0:u,locale:(t==null?void 0:t.locale)||"en_US"})}get overlay(){if(!tt.__overlays__.has(this.parameters)){let e=new Y.ViewController(this.endpoint,this.parameters);e.init(),tt.__overlays__.set(this.parameters,e)}return tt.__overlays__.get(this.parameters)}preload(){return me(this,null,function*(){yield this.overlay.ready})}},"te"),nn=tt;nn.__overlays__=new Map;var et=pe();function Xi(e,t){return t&&Array.isArray(e)?e.find(n=>n.id===t):e}o(Xi,"Xn");function Vi(e,t){var n;let s=(n=t.data.response)==null?void 0:n.id,c=Xi(e,s);if(s&&c){let u=new Nt(c).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:s,response:u}}return{}}o(Vi,"Bn");function Yi(e,t){return me(this,null,function*(){let n=yield Ue("rt"),s;if(Y.platform==="web")try{s=yield en()}catch(c){console.error("webcrypto error",c)}return s?n?{msgType:e,payload:t,jwt:s,rt:n}:{msgType:e,payload:t,jwt:s}:{msgType:e,payload:t}})}o(Yi,"Hn");function Ji(e){return me(this,null,function*(){!e.data.rt||(yield ot("rt",e.data.rt))})}o(Ji,"Vn");var Qi=o(class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return me(this,null,function*(){return Tt(n=>me(this,null,function*(){yield this.ready;let s=[],c=Array.isArray(t)?t.map(y=>y.id):[],u=yield Yi(`${e}-${this.parameters}`,t);yield this._post(u);let b=o(y=>g=>{let{id:v,response:M}=Vi(t,g);Ji(g),v&&M&&Array.isArray(t)&&c.includes(v)?(s.push(M),s.length===t.length&&(y(),n(s))):v&&M&&!Array.isArray(t)&&v===t.id&&(y(),n(M))},"i"),m=this.on(et.MagicIncomingWindowMessage.MAGIC_HANDLE_RESPONSE,b(()=>m()))}))})}on(e,t){let n=t.bind(window),s=o(c=>{c.data.msgType===`${e}-${this.parameters}`&&n(c)},"s");return this.messageHandlers.add(s),()=>this.messageHandlers.delete(s)}waitForReady(){return new Promise(e=>{this.on(et.MagicIncomingWindowMessage.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(et.MagicIncomingWindowMessage.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(et.MagicIncomingWindowMessage.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},"Ke");on.exports=Mo(Pr)});var cn=Xe((Ba,sn)=>{var Ct=Object.defineProperty,Zi=Object.getOwnPropertyDescriptor,ea=Object.getOwnPropertyNames,ta=Object.prototype.hasOwnProperty,ra=o(e=>Ct(e,"__esModule",{value:!0}),"M"),na=o((e,t)=>{for(var n in t)Ct(e,n,{get:t[n],enumerable:!0})},"m"),an=o((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of ea(t))!ta.call(e,c)&&(n||c!=="default")&&Ct(e,c,{get:()=>t[c],enumerable:!(s=Zi(t,c))||s.enumerable});return e},"t"),oa=(e=>(t,n)=>e&&e.get(t)||(n=an(ra({}),t,1),e&&e.set(t,n),n))(typeof WeakMap<"u"?new WeakMap:0),Dt={};na(Dt,{Extension:()=>Re.Extension,ExtensionError:()=>Re.MagicExtensionError,ExtensionWarning:()=>Re.MagicExtensionWarning,RPCError:()=>Re.MagicRPCError,SDKError:()=>Re.MagicSDKError,SDKWarning:()=>Re.MagicSDKWarning,isPromiEvent:()=>Re.isPromiEvent});var Re=st();an(Dt,pe());sn.exports=oa(Dt)});var Ea=Xe((Ga,pn)=>{var ia=Object.create,ut=Object.defineProperty,aa=Object.getOwnPropertyDescriptor,sa=Object.getOwnPropertyNames,ca=Object.getPrototypeOf,ua=Object.prototype.hasOwnProperty,fn=o(e=>ut(e,"__esModule",{value:!0}),"ke"),dn=o((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),"er"),la=o((e,t)=>{for(var n in t)ut(e,n,{get:t[n],enumerable:!0})},"it"),xt=o((e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of sa(t))!ua.call(e,c)&&(n||c!=="default")&&ut(e,c,{get:()=>t[c],enumerable:!(s=aa(t,c))||s.enumerable});return e},"re"),hn=o((e,t)=>xt(fn(ut(e!=null?ia(ca(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),"rr"),fa=(e=>(t,n)=>e&&e.get(t)||(n=xt(fn({}),t,1),e&&e.set(t,n),n))(typeof WeakMap<"u"?new WeakMap:0),ct=o((e,t,n)=>new Promise((s,c)=>{var u=o(y=>{try{m(n.next(y))}catch(g){c(g)}},"Q"),b=o(y=>{try{m(n.throw(y))}catch(g){c(g)}},"C"),m=o(y=>y.done?s(y.value):Promise.resolve(y.value).then(u,b),"Y");m((n=n.apply(e,t)).next())}),"de"),da=dn((e,t)=>{(function(n){if(typeof e=="object"&&typeof t<"u")t.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var s;typeof window<"u"?s=window:typeof global<"u"?s=global:typeof self<"u"?s=self:s=this,s.localforage=n()}})(function(){var n,s,c;return o(function u(b,m,y){function g(j,F){if(!m[j]){if(!b[j]){var S=typeof Ce=="function"&&Ce;if(!F&&S)return S(j,!0);if(v)return v(j,!0);var L=new Error("Cannot find module '"+j+"'");throw L.code="MODULE_NOT_FOUND",L}var A=m[j]={exports:{}};b[j][0].call(A.exports,function(G){var V=b[j][1][G];return g(V||G)},A,A.exports,u,b,m,y)}return m[j].exports}o(g,"Y");for(var v=typeof Ce=="function"&&Ce,M=0;M<y.length;M++)g(y[M]);return g},"L")({1:[function(u,b,m){(function(y){"use strict";var g=y.MutationObserver||y.WebKitMutationObserver,v;if(g){var M=0,j=new g(G),F=y.document.createTextNode("");j.observe(F,{characterData:!0}),v=o(function(){F.data=M=++M%2},"S")}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var S=new y.MessageChannel;S.port1.onmessage=G,v=o(function(){S.port2.postMessage(0)},"S")}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?v=o(function(){var C=y.document.createElement("script");C.onreadystatechange=function(){G(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},y.document.documentElement.appendChild(C)},"S"):v=o(function(){setTimeout(G,0)},"S");var L,A=[];function G(){L=!0;for(var C,le,W=A.length;W;){for(le=A,A=[],C=-1;++C<W;)le[C]();W=A.length}L=!1}o(G,"z"),b.exports=V;function V(C){A.push(C)===1&&!L&&v()}o(V,"q")}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(u,b,m){"use strict";var y=u(1);function g(){}o(g,"Y");var v={},M=["REJECTED"],j=["FULFILLED"],F=["PENDING"];b.exports=S;function S(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=F,this.queue=[],this.outcome=void 0,N!==g&&V(this,N)}o(S,"m"),S.prototype.catch=function(N){return this.then(null,N)},S.prototype.then=function(N,U){if(typeof N!="function"&&this.state===j||typeof U!="function"&&this.state===M)return this;var x=new this.constructor(g);if(this.state!==F){var q=this.state===j?N:U;A(x,q,this.outcome)}else this.queue.push(new L(x,N,U));return x};function L(N,U,x){this.promise=N,typeof U=="function"&&(this.onFulfilled=U,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}o(L,"w"),L.prototype.callFulfilled=function(N){v.resolve(this.promise,N)},L.prototype.otherCallFulfilled=function(N){A(this.promise,this.onFulfilled,N)},L.prototype.callRejected=function(N){v.reject(this.promise,N)},L.prototype.otherCallRejected=function(N){A(this.promise,this.onRejected,N)};function A(N,U,x){y(function(){var q;try{q=U(x)}catch(J){return v.reject(N,J)}q===N?v.reject(N,new TypeError("Cannot resolve promise with itself")):v.resolve(N,q)})}o(A,"T"),v.resolve=function(N,U){var x=C(G,U);if(x.status==="error")return v.reject(N,x.value);var q=x.value;if(q)V(N,q);else{N.state=j,N.outcome=U;for(var J=-1,ne=N.queue.length;++J<ne;)N.queue[J].callFulfilled(U)}return N},v.reject=function(N,U){N.state=M,N.outcome=U;for(var x=-1,q=N.queue.length;++x<q;)N.queue[x].callRejected(U);return N};function G(N){var U=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof U=="function")return function(){U.apply(N,arguments)}}o(G,"z");function V(N,U){var x=!1;function q(se){x||(x=!0,v.reject(N,se))}o(q,"x");function J(se){x||(x=!0,v.resolve(N,se))}o(J,"H");function ne(){U(J,q)}o(ne,"j");var ae=C(ne);ae.status==="error"&&q(ae.value)}o(V,"q");function C(N,U){var x={};try{x.value=N(U),x.status="success"}catch(q){x.status="error",x.value=q}return x}o(C,"F"),S.resolve=le;function le(N){return N instanceof this?N:v.resolve(new this(g),N)}o(le,"k"),S.reject=W;function W(N){var U=new this(g);return v.reject(U,N)}o(W,"U"),S.all=Se;function Se(N){var U=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=N.length,q=!1;if(!x)return this.resolve([]);for(var J=new Array(x),ne=0,ae=-1,se=new this(g);++ae<x;)fe(N[ae],ae);return se;function fe(Ie,h){U.resolve(Ie).then(E,function(O){q||(q=!0,v.reject(se,O))});function E(O){J[h]=O,++ne===x&&!q&&(q=!0,v.resolve(se,J))}o(E,"s")}}o(Se,"se"),S.race=he;function he(N){var U=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=N.length,q=!1;if(!x)return this.resolve([]);for(var J=-1,ne=new this(g);++J<x;)ae(N[J]);return ne;function ae(se){U.resolve(se).then(function(fe){q||(q=!0,v.resolve(ne,fe))},function(fe){q||(q=!0,v.reject(ne,fe))})}}o(he,"ne")},{"1":1}],3:[function(u,b,m){(function(y){"use strict";typeof y.Promise!="function"&&(y.Promise=u(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"2":2}],4:[function(u,b,m){"use strict";var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function g(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}o(g,"Y");function v(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}o(v,"S");var M=v();function j(){try{if(!M||!M.open)return!1;var r=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!r||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}o(j,"K");function F(r,i){r=r||[],i=i||{};try{return new Blob(r,i)}catch(d){if(d.name!=="TypeError")throw d;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,f=new a,l=0;l<r.length;l+=1)f.append(r[l]);return f.getBlob(i.type)}}o(F,"Z"),typeof Promise>"u"&&u(3);var S=Promise;function L(r,i){i&&r.then(function(a){i(null,a)},function(a){i(a)})}o(L,"w");function A(r,i,a){typeof i=="function"&&r.then(i),typeof a=="function"&&r.catch(a)}o(A,"T");function G(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}o(G,"z");function V(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}o(V,"q");var C="local-forage-detect-blob-support",le=void 0,W={},Se=Object.prototype.toString,he="readonly",N="readwrite";function U(r){for(var i=r.length,a=new ArrayBuffer(i),f=new Uint8Array(a),l=0;l<i;l++)f[l]=r.charCodeAt(l);return a}o(U,"D");function x(r){return new S(function(i){var a=r.transaction(C,N),f=F([""]);a.objectStore(C).put(f,"key"),a.onabort=function(l){l.preventDefault(),l.stopPropagation(),i(!1)},a.oncomplete=function(){var l=navigator.userAgent.match(/Chrome\/(\d+)/),d=navigator.userAgent.match(/Edge\//);i(d||!l||parseInt(l[1],10)>=43)}}).catch(function(){return!1})}o(x,"I");function q(r){return typeof le=="boolean"?S.resolve(le):x(r).then(function(i){return le=i,le})}o(q,"x");function J(r){var i=W[r.name],a={};a.promise=new S(function(f,l){a.resolve=f,a.reject=l}),i.deferredOperations.push(a),i.dbReady?i.dbReady=i.dbReady.then(function(){return a.promise}):i.dbReady=a.promise}o(J,"H");function ne(r){var i=W[r.name],a=i.deferredOperations.pop();if(a)return a.resolve(),a.promise}o(ne,"j");function ae(r,i){var a=W[r.name],f=a.deferredOperations.pop();if(f)return f.reject(i),f.promise}o(ae,"J");function se(r,i){return new S(function(a,f){if(W[r.name]=W[r.name]||Z(),r.db)if(i)J(r),r.db.close();else return a(r.db);var l=[r.name];i&&l.push(r.version);var d=M.open.apply(M,l);i&&(d.onupgradeneeded=function(p){var _=d.result;try{_.createObjectStore(r.storeName),p.oldVersion<=1&&_.createObjectStore(C)}catch(R){if(R.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+p.oldVersion+" to version "+p.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw R}}),d.onerror=function(p){p.preventDefault(),f(d.error)},d.onsuccess=function(){a(d.result),ne(r)}})}o(se,"$");function fe(r){return se(r,!1)}o(fe,"ee");function Ie(r){return se(r,!0)}o(Ie,"fe");function h(r,i){if(!r.db)return!0;var a=!r.db.objectStoreNames.contains(r.storeName),f=r.version<r.db.version,l=r.version>r.db.version;if(f&&(r.version!==i&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),l||a){if(a){var d=r.db.version+1;d>r.version&&(r.version=d)}return!0}return!1}o(h,"a");function E(r){return new S(function(i,a){var f=new FileReader;f.onerror=a,f.onloadend=function(l){var d=btoa(l.target.result||"");i({__local_forage_encoded_blob:!0,data:d,type:r.type})},f.readAsBinaryString(r)})}o(E,"s");function O(r){var i=U(atob(r.data));return F([i],{type:r.type})}o(O,"v");function $(r){return r&&r.__local_forage_encoded_blob}o($,"b");function P(r){var i=this,a=i._initReady().then(function(){var f=W[i._dbInfo.name];if(f&&f.dbReady)return f.dbReady});return A(a,r,r),a}o(P,"_");function D(r){J(r);for(var i=W[r.name],a=i.forages,f=0;f<a.length;f++){var l=a[f];l._dbInfo.db&&(l._dbInfo.db.close(),l._dbInfo.db=null)}return r.db=null,fe(r).then(function(d){return r.db=d,h(r)?Ie(r):d}).then(function(d){r.db=i.db=d;for(var p=0;p<a.length;p++)a[p]._dbInfo.db=d}).catch(function(d){throw ae(r,d),d})}o(D,"E");function B(r,i,a,f){f===void 0&&(f=1);try{var l=r.db.transaction(r.storeName,i);a(null,l)}catch(d){if(f>0&&(!r.db||d.name==="InvalidStateError"||d.name==="NotFoundError"))return S.resolve().then(function(){if(!r.db||d.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),Ie(r)}).then(function(){return D(r).then(function(){B(r,i,a,f-1)})}).catch(a);a(d)}}o(B,"N");function Z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}o(Z,"G");function Oe(r){var i=this,a={db:null};if(r)for(var f in r)a[f]=r[f];var l=W[a.name];l||(l=Z(),W[a.name]=l),l.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=P);var d=[];function p(){return S.resolve()}o(p,"f");for(var _=0;_<l.forages.length;_++){var R=l.forages[_];R!==i&&d.push(R._initReady().catch(p))}var w=l.forages.slice(0);return S.all(d).then(function(){return a.db=l.db,fe(a)}).then(function(I){return a.db=I,h(a,i._defaultConfig.version)?Ie(a):I}).then(function(I){a.db=l.db=I,i._dbInfo=a;for(var T=0;T<w.length;T++){var k=w[T];k!==i&&(k._dbInfo.db=a.db,k._dbInfo.version=a.version)}})}o(Oe,"ce");function we(r,i){var a=this;r=G(r);var f=new S(function(l,d){a.ready().then(function(){B(a._dbInfo,he,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=R.get(r);w.onsuccess=function(){var I=w.result;I===void 0&&(I=null),$(I)&&(I=O(I)),l(I)},w.onerror=function(){d(w.error)}}catch(I){d(I)}})}).catch(d)});return L(f,i),f}o(we,"ue");function $e(r,i){var a=this,f=new S(function(l,d){a.ready().then(function(){B(a._dbInfo,he,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=R.openCursor(),I=1;w.onsuccess=function(){var T=w.result;if(T){var k=T.value;$(k)&&(k=O(k));var H=r(k,T.key,I++);H!==void 0?l(H):T.continue()}else l()},w.onerror=function(){d(w.error)}}catch(T){d(T)}})}).catch(d)});return L(f,i),f}o($e,"ve");function vn(r,i,a){var f=this;r=G(r);var l=new S(function(d,p){var _;f.ready().then(function(){return _=f._dbInfo,Se.call(i)==="[object Blob]"?q(_.db).then(function(R){return R?i:E(i)}):i}).then(function(R){B(f._dbInfo,N,function(w,I){if(w)return p(w);try{var T=I.objectStore(f._dbInfo.storeName);R===null&&(R=void 0);var k=T.put(R,r);I.oncomplete=function(){R===void 0&&(R=null),d(R)},I.onabort=I.onerror=function(){var H=k.error?k.error:k.transaction.error;p(H)}}catch(H){p(H)}})}).catch(p)});return L(l,a),l}o(vn,"ar");function mn(r,i){var a=this;r=G(r);var f=new S(function(l,d){a.ready().then(function(){B(a._dbInfo,N,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=R.delete(r);_.oncomplete=function(){l()},_.onerror=function(){d(w.error)},_.onabort=function(){var I=w.error?w.error:w.transaction.error;d(I)}}catch(I){d(I)}})}).catch(d)});return L(f,i),f}o(mn,"fr");function gn(r){var i=this,a=new S(function(f,l){i.ready().then(function(){B(i._dbInfo,N,function(d,p){if(d)return l(d);try{var _=p.objectStore(i._dbInfo.storeName),R=_.clear();p.oncomplete=function(){f()},p.onabort=p.onerror=function(){var w=R.error?R.error:R.transaction.error;l(w)}}catch(w){l(w)}})}).catch(l)});return L(a,r),a}o(gn,"ur");function yn(r){var i=this,a=new S(function(f,l){i.ready().then(function(){B(i._dbInfo,he,function(d,p){if(d)return l(d);try{var _=p.objectStore(i._dbInfo.storeName),R=_.count();R.onsuccess=function(){f(R.result)},R.onerror=function(){l(R.error)}}catch(w){l(w)}})}).catch(l)});return L(a,r),a}o(yn,"sr");function En(r,i){var a=this,f=new S(function(l,d){if(r<0){l(null);return}a.ready().then(function(){B(a._dbInfo,he,function(p,_){if(p)return d(p);try{var R=_.objectStore(a._dbInfo.storeName),w=!1,I=R.openKeyCursor();I.onsuccess=function(){var T=I.result;if(!T){l(null);return}r===0||w?l(T.key):(w=!0,T.advance(r))},I.onerror=function(){d(I.error)}}catch(T){d(T)}})}).catch(d)});return L(f,i),f}o(En,"cr");function _n(r){var i=this,a=new S(function(f,l){i.ready().then(function(){B(i._dbInfo,he,function(d,p){if(d)return l(d);try{var _=p.objectStore(i._dbInfo.storeName),R=_.openKeyCursor(),w=[];R.onsuccess=function(){var I=R.result;if(!I){f(w);return}w.push(I.key),I.continue()},R.onerror=function(){l(R.error)}}catch(I){l(I)}})}).catch(l)});return L(a,r),a}o(_n,"lr");function bn(r,i){i=V.apply(this,arguments);var a=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||a.name,r.storeName=r.storeName||a.storeName);var f=this,l;if(!r.name)l=S.reject("Invalid arguments");else{var d=r.name===a.name&&f._dbInfo.db,p=d?S.resolve(f._dbInfo.db):fe(r).then(function(_){var R=W[r.name],w=R.forages;R.db=_;for(var I=0;I<w.length;I++)w[I]._dbInfo.db=_;return _});r.storeName?l=p.then(function(_){if(_.objectStoreNames.contains(r.storeName)){var R=_.version+1;J(r);var w=W[r.name],I=w.forages;_.close();for(var T=0;T<I.length;T++){var k=I[T];k._dbInfo.db=null,k._dbInfo.version=R}var H=new S(function(K,Q){var X=M.open(r.name,R);X.onerror=function(oe){var gt=X.result;gt.close(),Q(oe)},X.onupgradeneeded=function(){var oe=X.result;oe.deleteObjectStore(r.storeName)},X.onsuccess=function(){var oe=X.result;oe.close(),K(oe)}});return H.then(function(K){w.db=K;for(var Q=0;Q<I.length;Q++){var X=I[Q];X._dbInfo.db=K,ne(X._dbInfo)}}).catch(function(K){throw(ae(r,K)||S.resolve()).catch(function(){}),K})}}):l=p.then(function(_){J(r);var R=W[r.name],w=R.forages;_.close();for(var I=0;I<w.length;I++){var T=w[I];T._dbInfo.db=null}var k=new S(function(H,K){var Q=M.deleteDatabase(r.name);Q.onerror=Q.onblocked=function(X){var oe=Q.result;oe&&oe.close(),K(X)},Q.onsuccess=function(){var X=Q.result;X&&X.close(),H(X)}});return k.then(function(H){R.db=H;for(var K=0;K<w.length;K++){var Q=w[K];ne(Q._dbInfo)}}).catch(function(H){throw(ae(r,H)||S.resolve()).catch(function(){}),H})})}return L(l,i),l}o(bn,"dr");var In={_driver:"asyncStorage",_initStorage:Oe,_support:j(),iterate:$e,getItem:we,setItem:vn,removeItem:mn,clear:gn,length:yn,key:En,keys:_n,dropInstance:bn};function wn(){return typeof openDatabase=="function"}o(wn,"hr");var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rn="~~local_forage_type~",Ut=/^~~local_forage_type~([^~]+)~/,ze="__lfsc__:",lt=ze.length,ft="arbf",dt="blob",Ft="si08",Bt="ui08",Gt="uic8",Wt="si16",qt="si32",Kt="ur16",zt="ui32",Ht="fl32",Xt="fl64",Vt=lt+ft.length,Yt=Object.prototype.toString;function Jt(r){var i=r.length*.75,a=r.length,f,l=0,d,p,_,R;r[r.length-1]==="="&&(i--,r[r.length-2]==="="&&i--);var w=new ArrayBuffer(i),I=new Uint8Array(w);for(f=0;f<a;f+=4)d=ge.indexOf(r[f]),p=ge.indexOf(r[f+1]),_=ge.indexOf(r[f+2]),R=ge.indexOf(r[f+3]),I[l++]=d<<2|p>>4,I[l++]=(p&15)<<4|_>>2,I[l++]=(_&3)<<6|R&63;return w}o(Jt,"je");function ht(r){var i=new Uint8Array(r),a="",f;for(f=0;f<i.length;f+=3)a+=ge[i[f]>>2],a+=ge[(i[f]&3)<<4|i[f+1]>>4],a+=ge[(i[f+1]&15)<<2|i[f+2]>>6],a+=ge[i[f+2]&63];return i.length%3===2?a=a.substring(0,a.length-1)+"=":i.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}o(ht,"Ae");function Sn(r,i){var a="";if(r&&(a=Yt.call(r)),r&&(a==="[object ArrayBuffer]"||r.buffer&&Yt.call(r.buffer)==="[object ArrayBuffer]")){var f,l=ze;r instanceof ArrayBuffer?(f=r,l+=ft):(f=r.buffer,a==="[object Int8Array]"?l+=Ft:a==="[object Uint8Array]"?l+=Bt:a==="[object Uint8ClampedArray]"?l+=Gt:a==="[object Int16Array]"?l+=Wt:a==="[object Uint16Array]"?l+=Kt:a==="[object Int32Array]"?l+=qt:a==="[object Uint32Array]"?l+=zt:a==="[object Float32Array]"?l+=Ht:a==="[object Float64Array]"?l+=Xt:i(new Error("Failed to get type for BinaryArray"))),i(l+ht(f))}else if(a==="[object Blob]"){var d=new FileReader;d.onload=function(){var p=Rn+r.type+"~"+ht(this.result);i(ze+dt+p)},d.readAsArrayBuffer(r)}else try{i(JSON.stringify(r))}catch(p){console.error("Couldn't convert value into a JSON string: ",r),i(null,p)}}o(Sn,"yr");function On(r){if(r.substring(0,lt)!==ze)return JSON.parse(r);var i=r.substring(Vt),a=r.substring(lt,Vt),f;if(a===dt&&Ut.test(i)){var l=i.match(Ut);f=l[1],i=i.substring(l[0].length)}var d=Jt(i);switch(a){case ft:return d;case dt:return F([d],{type:f});case Ft:return new Int8Array(d);case Bt:return new Uint8Array(d);case Gt:return new Uint8ClampedArray(d);case Wt:return new Int16Array(d);case Kt:return new Uint16Array(d);case qt:return new Int32Array(d);case zt:return new Uint32Array(d);case Ht:return new Float32Array(d);case Xt:return new Float64Array(d);default:throw new Error("Unkown type: "+a)}}o(On,"pr");var pt={serialize:Sn,deserialize:On,stringToBuffer:Jt,bufferToString:ht};function Qt(r,i,a,f){r.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,f)}o(Qt,"Xe");function Mn(r){var i=this,a={db:null};if(r)for(var f in r)a[f]=typeof r[f]!="string"?r[f].toString():r[f];var l=new S(function(d,p){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(_){return p(_)}a.db.transaction(function(_){Qt(_,a,function(){i._dbInfo=a,d()},function(R,w){p(w)})},p)});return a.serializer=pt,l}o(Mn,"gr");function ye(r,i,a,f,l,d){r.executeSql(a,f,l,function(p,_){_.code===_.SYNTAX_ERR?p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(R,w){w.rows.length?d(R,_):Qt(R,i,function(){R.executeSql(a,f,l,d)},d)},d):d(p,_)},d)}o(ye,"ae");function Nn(r,i){var a=this;r=G(r);var f=new S(function(l,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){ye(_,p,"SELECT * FROM "+p.storeName+" WHERE key = ? LIMIT 1",[r],function(R,w){var I=w.rows.length?w.rows.item(0).value:null;I&&(I=p.serializer.deserialize(I)),l(I)},function(R,w){d(w)})})}).catch(d)});return L(f,i),f}o(Nn,"br");function An(r,i){var a=this,f=new S(function(l,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){ye(_,p,"SELECT * FROM "+p.storeName,[],function(R,w){for(var I=w.rows,T=I.length,k=0;k<T;k++){var H=I.item(k),K=H.value;if(K&&(K=p.serializer.deserialize(K)),K=r(K,H.key,k+1),K!==void 0){l(K);return}}l()},function(R,w){d(w)})})}).catch(d)});return L(f,i),f}o(An,"_r");function Zt(r,i,a,f){var l=this;r=G(r);var d=new S(function(p,_){l.ready().then(function(){i===void 0&&(i=null);var R=i,w=l._dbInfo;w.serializer.serialize(i,function(I,T){T?_(T):w.db.transaction(function(k){ye(k,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[r,I],function(){p(R)},function(H,K){_(K)})},function(k){if(k.code===k.QUOTA_ERR){if(f>0){p(Zt.apply(l,[r,R,a,f-1]));return}_(k)}})})}).catch(_)});return L(d,a),d}o(Zt,"Qe");function Ln(r,i,a){return Zt.apply(this,[r,i,a,1])}o(Ln,"wr");function Tn(r,i){var a=this;r=G(r);var f=new S(function(l,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){ye(_,p,"DELETE FROM "+p.storeName+" WHERE key = ?",[r],function(){l()},function(R,w){d(w)})})}).catch(d)});return L(f,i),f}o(Tn,"Er");function $n(r){var i=this,a=new S(function(f,l){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(p){ye(p,d,"DELETE FROM "+d.storeName,[],function(){f()},function(_,R){l(R)})})}).catch(l)});return L(a,r),a}o($n,"Ir");function Pn(r){var i=this,a=new S(function(f,l){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(p){ye(p,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(_,R){var w=R.rows.item(0).c;f(w)},function(_,R){l(R)})})}).catch(l)});return L(a,r),a}o(Pn,"Sr");function Cn(r,i){var a=this,f=new S(function(l,d){a.ready().then(function(){var p=a._dbInfo;p.db.transaction(function(_){ye(_,p,"SELECT key FROM "+p.storeName+" WHERE id = ? LIMIT 1",[r+1],function(R,w){var I=w.rows.length?w.rows.item(0).key:null;l(I)},function(R,w){d(w)})})}).catch(d)});return L(f,i),f}o(Cn,"Ar");function Dn(r){var i=this,a=new S(function(f,l){i.ready().then(function(){var d=i._dbInfo;d.db.transaction(function(p){ye(p,d,"SELECT key FROM "+d.storeName,[],function(_,R){for(var w=[],I=0;I<R.rows.length;I++)w.push(R.rows.item(I).key);f(w)},function(_,R){l(R)})})}).catch(l)});return L(a,r),a}o(Dn,"Rr");function jn(r){return new S(function(i,a){r.transaction(function(f){f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(l,d){for(var p=[],_=0;_<d.rows.length;_++)p.push(d.rows.item(_).name);i({db:r,storeNames:p})},function(l,d){a(d)})},function(f){a(f)})})}o(jn,"Dr");function xn(r,i){i=V.apply(this,arguments);var a=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||a.name,r.storeName=r.storeName||a.storeName);var f=this,l;return r.name?l=new S(function(d){var p;r.name===a.name?p=f._dbInfo.db:p=openDatabase(r.name,"","",0),r.storeName?d({db:p,storeNames:[r.storeName]}):d(jn(p))}).then(function(d){return new S(function(p,_){d.db.transaction(function(R){function w(H){return new S(function(K,Q){R.executeSql("DROP TABLE IF EXISTS "+H,[],function(){K()},function(X,oe){Q(oe)})})}o(w,"l");for(var I=[],T=0,k=d.storeNames.length;T<k;T++)I.push(w(d.storeNames[T]));S.all(I).then(function(){p()}).catch(function(H){_(H)})},function(R){_(R)})})}):l=S.reject("Invalid arguments"),L(l,i),l}o(xn,"Nr");var kn={_driver:"webSQLStorage",_initStorage:Mn,_support:wn(),iterate:An,getItem:Nn,setItem:Ln,removeItem:Tn,clear:$n,length:Pn,key:Cn,keys:Dn,dropInstance:xn};function Un(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}o(Un,"Br");function er(r,i){var a=r.name+"/";return r.storeName!==i.storeName&&(a+=r.storeName+"/"),a}o(er,"Je");function Fn(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return!0}}o(Fn,"xr");function Bn(){return!Fn()||localStorage.length>0}o(Bn,"Or");function Gn(r){var i=this,a={};if(r)for(var f in r)a[f]=r[f];return a.keyPrefix=er(r,i._defaultConfig),Bn()?(i._dbInfo=a,a.serializer=pt,S.resolve()):S.reject()}o(Gn,"Cr");function Wn(r){var i=this,a=i.ready().then(function(){for(var f=i._dbInfo.keyPrefix,l=localStorage.length-1;l>=0;l--){var d=localStorage.key(l);d.indexOf(f)===0&&localStorage.removeItem(d)}});return L(a,r),a}o(Wn,"Lr");function qn(r,i){var a=this;r=G(r);var f=a.ready().then(function(){var l=a._dbInfo,d=localStorage.getItem(l.keyPrefix+r);return d&&(d=l.serializer.deserialize(d)),d});return L(f,i),f}o(qn,"Pr");function Kn(r,i){var a=this,f=a.ready().then(function(){for(var l=a._dbInfo,d=l.keyPrefix,p=d.length,_=localStorage.length,R=1,w=0;w<_;w++){var I=localStorage.key(w);if(I.indexOf(d)===0){var T=localStorage.getItem(I);if(T&&(T=l.serializer.deserialize(T)),T=r(T,I.substring(p),R++),T!==void 0)return T}}});return L(f,i),f}o(Kn,"Mr");function zn(r,i){var a=this,f=a.ready().then(function(){var l=a._dbInfo,d;try{d=localStorage.key(r)}catch{d=null}return d&&(d=d.substring(l.keyPrefix.length)),d});return L(f,i),f}o(zn,"Fr");function Hn(r){var i=this,a=i.ready().then(function(){for(var f=i._dbInfo,l=localStorage.length,d=[],p=0;p<l;p++){var _=localStorage.key(p);_.indexOf(f.keyPrefix)===0&&d.push(_.substring(f.keyPrefix.length))}return d});return L(a,r),a}o(Hn,"Ur");function Xn(r){var i=this,a=i.keys().then(function(f){return f.length});return L(a,r),a}o(Xn,"Yr");function Vn(r,i){var a=this;r=G(r);var f=a.ready().then(function(){var l=a._dbInfo;localStorage.removeItem(l.keyPrefix+r)});return L(f,i),f}o(Vn,"zr");function Yn(r,i,a){var f=this;r=G(r);var l=f.ready().then(function(){i===void 0&&(i=null);var d=i;return new S(function(p,_){var R=f._dbInfo;R.serializer.serialize(i,function(w,I){if(I)_(I);else try{localStorage.setItem(R.keyPrefix+r,w),p(d)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&_(T),_(T)}})})});return L(l,a),l}o(Yn,"Wr");function Jn(r,i){if(i=V.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var a=this.config();r.name=r.name||a.name,r.storeName=r.storeName||a.storeName}var f=this,l;return r.name?l=new S(function(d){r.storeName?d(er(r,f._defaultConfig)):d(r.name+"/")}).then(function(d){for(var p=localStorage.length-1;p>=0;p--){var _=localStorage.key(p);_.indexOf(d)===0&&localStorage.removeItem(_)}}):l=S.reject("Invalid arguments"),L(l,i),l}o(Jn,"Kr");var Qn={_driver:"localStorageWrapper",_initStorage:Gn,_support:Un(),iterate:Kn,getItem:qn,setItem:Yn,removeItem:Vn,clear:Wn,length:Xn,key:zn,keys:Hn,dropInstance:Jn},Zn=o(function(r,i){return r===i||typeof r=="number"&&typeof i=="number"&&isNaN(r)&&isNaN(i)},"Vr"),eo=o(function(r,i){for(var a=r.length,f=0;f<a;){if(Zn(r[f],i))return!0;f++}return!1},"Gr"),tr=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},Pe={},rr={},Me={INDEXEDDB:In,WEBSQL:kn,LOCALSTORAGE:Qn},to=[Me.INDEXEDDB._driver,Me.WEBSQL._driver,Me.LOCALSTORAGE._driver],He=["dropInstance"],vt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(He),ro={description:"",driver:to.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function no(r,i){r[i]=function(){var a=arguments;return r.ready().then(function(){return r[i].apply(r,a)})}}o(no,"Qr");function mt(){for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i)for(var a in i)i.hasOwnProperty(a)&&(tr(i[a])?arguments[0][a]=i[a].slice():arguments[0][a]=i[a])}return arguments[0]}o(mt,"Ne");var oo=function(){function r(i){g(this,r);for(var a in Me)if(Me.hasOwnProperty(a)){var f=Me[a],l=f._driver;this[a]=l,Pe[l]||this.defineDriver(f)}this._defaultConfig=mt({},ro),this._config=mt({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o(r,"e"),r.prototype.config=function(i){if((typeof i>"u"?"undefined":y(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in i){if(a==="storeName"&&(i[a]=i[a].replace(/\W/g,"_")),a==="version"&&typeof i[a]!="number")return new Error("Database version must be a number.");this._config[a]=i[a]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},r.prototype.defineDriver=function(i,a,f){var l=new S(function(d,p){try{var _=i._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){p(R);return}for(var w=vt.concat("_initStorage"),I=0,T=w.length;I<T;I++){var k=w[I],H=!eo(He,k);if((H||i[k])&&typeof i[k]!="function"){p(R);return}}var K=o(function(){for(var X=function(ao){return function(){var so=new Error("Method "+ao+" is not implemented by the current driver"),nr=S.reject(so);return L(nr,arguments[arguments.length-1]),nr}},oe=0,gt=He.length;oe<gt;oe++){var yt=He[oe];i[yt]||(i[yt]=X(yt))}},"V");K();var Q=o(function(X){Pe[_]&&console.info("Redefining LocalForage driver: "+_),Pe[_]=i,rr[_]=X,d()},"W");"_support"in i?i._support&&typeof i._support=="function"?i._support().then(Q,p):Q(!!i._support):Q(!0)}catch(X){p(X)}});return A(l,a,f),l},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(i,a,f){var l=Pe[i]?S.resolve(Pe[i]):S.reject(new Error("Driver not found."));return A(l,a,f),l},r.prototype.getSerializer=function(i){var a=S.resolve(pt);return A(a,i),a},r.prototype.ready=function(i){var a=this,f=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return A(f,i,i),f},r.prototype.setDriver=function(i,a,f){var l=this;tr(i)||(i=[i]);var d=this._getSupportedDrivers(i);function p(){l._config.driver=l.driver()}o(p,"u");function _(I){return l._extend(I),p(),l._ready=l._initStorage(l._config),l._ready}o(_,"c");function R(I){return function(){var T=0;function k(){for(;T<I.length;){var H=I[T];return T++,l._dbInfo=null,l._ready=null,l.getDriver(H).then(_).catch(k)}p();var K=new Error("No available storage method found.");return l._driverSet=S.reject(K),l._driverSet}return o(k,"B"),k()}}o(R,"l");var w=this._driverSet!==null?this._driverSet.catch(function(){return S.resolve()}):S.resolve();return this._driverSet=w.then(function(){var I=d[0];return l._dbInfo=null,l._ready=null,l.getDriver(I).then(function(T){l._driver=T._driver,p(),l._wrapLibraryMethodsWithReady(),l._initDriver=R(d)})}).catch(function(){p();var I=new Error("No available storage method found.");return l._driverSet=S.reject(I),l._driverSet}),A(this._driverSet,a,f),this._driverSet},r.prototype.supports=function(i){return!!rr[i]},r.prototype._extend=function(i){mt(this,i)},r.prototype._getSupportedDrivers=function(i){for(var a=[],f=0,l=i.length;f<l;f++){var d=i[f];this.supports(d)&&a.push(d)}return a},r.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,a=vt.length;i<a;i++)no(this,vt[i])},r.prototype.createInstance=function(i){return new r(i)},r}(),io=new oo;b.exports=io},{"3":3}]},{},[4])(4)})}),ha=dn((e,t)=>{(function(n,s){typeof e=="object"&&typeof t<"u"?s(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],s):s(n.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(n){"use strict";var s="localforage-driver-memory";function c(h){var E=typeof Symbol=="function"&&h[Symbol.iterator],O=0;return E?E.call(h):{next:function(){return h&&O>=h.length&&(h=void 0),{value:h&&h[O++],done:!h}}}}o(c,"R");function u(h,E){h=h||[],E=E||{};try{return new Blob(h,E)}catch(D){if(D.name!=="TypeError")throw D;for(var O=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$=new O,P=0;P<h.length;P+=1)$.append(h[P]);return $.getBlob(E.type)}}o(u,"L");var b=/^~~local_forage_type~([^~]+)~/,m=9,y=m+4,g=Object.prototype.toString;function v(h){var E=h.length*.75,O=h.length;h[h.length-1]==="="&&(E--,h[h.length-2]==="="&&E--);for(var $=new ArrayBuffer(E),P=new Uint8Array($),D=0,B=0;D<O;D+=4){var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[D]),Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[D+1]),we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[D+2]),$e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[D+3]);P[B++]=Z<<2|Oe>>4,P[B++]=(Oe&15)<<4|we>>2,P[B++]=(we&3)<<6|$e&63}return $}o(v,"S");function M(h){for(var E=new Uint8Array(h),O="",$=0;$<E.length;$+=3)O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[E[$]>>2],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(E[$]&3)<<4|E[$+1]>>4],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(E[$+1]&15)<<2|E[$+2]>>6],O+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[E[$+2]&63];return E.length%3===2?O=O.substring(0,O.length-1)+"=":E.length%3===1&&(O=O.substring(0,O.length-2)+"=="),O}o(M,"P");function j(h,E){var O="";if(h&&(O=g.call(h)),h&&(O==="[object ArrayBuffer]"||h.buffer&&g.call(h.buffer)==="[object ArrayBuffer]")){var $=void 0,P="__lfsc__:";h instanceof ArrayBuffer?($=h,P+="arbf"):($=h.buffer,O==="[object Int8Array]"?P+="si08":O==="[object Uint8Array]"?P+="ui08":O==="[object Uint8ClampedArray]"?P+="uic8":O==="[object Int16Array]"?P+="si16":O==="[object Uint16Array]"?P+="ur16":O==="[object Int32Array]"?P+="si32":O==="[object Uint32Array]"?P+="ui32":O==="[object Float32Array]"?P+="fl32":O==="[object Float64Array]"?P+="fl64":E(new Error("Failed to get type for BinaryArray"))),E(P+M($))}else if(O==="[object Blob]"){var D=new FileReader;D.onload=function(){var B="~~local_forage_type~"+h.type+"~"+M(this.result);E("__lfsc__:blob"+B)},D.readAsArrayBuffer(h)}else try{E(JSON.stringify(h))}catch(B){console.error("Couldn't convert value into a JSON string: ",h),E(null,B)}}o(j,"K");function F(h){if(h.substring(0,m)!=="__lfsc__:")return JSON.parse(h);var E=h.substring(y),O=h.substring(m,y),$;if(O==="blob"&&b.test(E)){var P=E.match(b);$=P[1],E=E.substring(P[0].length)}var D=v(E);switch(O){case"arbf":return D;case"blob":return u([D],{type:$});case"si08":return new Int8Array(D);case"ui08":return new Uint8Array(D);case"uic8":return new Uint8ClampedArray(D);case"si16":return new Int16Array(D);case"ur16":return new Uint16Array(D);case"si32":return new Int32Array(D);case"ui32":return new Uint32Array(D);case"fl32":return new Float32Array(D);case"fl64":return new Float64Array(D);default:throw new Error("Unkown type: "+O)}}o(F,"Z");function S(h){var E,O;if(h===null||typeof h!="object"||"isActiveClone"in h)return h;var $=h instanceof Date?new Date(h):h.constructor();try{for(var P=c(Object.keys(h)),D=P.next();!D.done;D=P.next()){var B=D.value;Object.prototype.hasOwnProperty.call(h,B)&&(h.isActiveClone=null,$[B]=S(h[B]),delete h.isActiveClone)}}catch(Z){E={error:Z}}finally{try{D&&!D.done&&(O=P.return)&&O.call(P)}finally{if(E)throw E.error}}return $}o(S,"m");function L(h,E){return(h.name||E.name)+"/"+(h.storeName||E.storeName)+"/"}o(L,"w");function A(h,E){E&&h.then(function(O){E(null,O)},function(O){E(O)})}o(A,"T");function G(){for(var h=[],E=0;E<arguments.length;E++)h[E]=arguments[E];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}o(G,"z");function V(h,E){var O=this;if(E=G.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var $=this.config();h.name=h.name||$.name,h.storeName=h.storeName||$.storeName}var P;return h.name?P=new Promise(function(D){h.storeName?D(L(h,O._defaultConfig)):D(h.name+"/")}):P=Promise.reject("Invalid arguments"),{promise:P,callback:E}}o(V,"q");function C(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}o(C,"F");var le={bufferToString:M,deserialize:F,serialize:j,stringToBuffer:v},W={},Se=function(){function h(E){this.kp=E,this.data={}}return o(h,"a"),h.resolve=function(E){return W[E]||(W[E]=new h(E)),W[E]},h.prototype.clear=function(){this.data={}},h.prototype.drop=function(){this.clear(),delete W[this.kp]},h.prototype.get=function(E){return this.data[E]},h.prototype.key=function(E){return this.keys()[E]},h.prototype.keys=function(){return Object.keys(this.data)},h.prototype.rm=function(E){delete this.data[E]},h.prototype.set=function(E,O){this.data[E]=O},h}();function he(h){var E=h?S(h):{},O=L(E,this._defaultConfig),$=Se.resolve(O);return this._dbInfo=E,this._dbInfo.serializer=le,this._dbInfo.keyPrefix=O,this._dbInfo.mStore=$,Promise.resolve()}o(he,"ne");function N(h){var E=this,O=this.ready().then(function(){E._dbInfo.mStore.clear()});return A(O,h),O}o(N,"h");function U(h,E){var O=V.apply(this,arguments),$=O.promise,P=O.callback,D=$.then(function(B){Se.resolve(B).drop()});return A(D,P),$}o(U,"D");function x(h,E){var O=this;h=C(h);var $=this.ready().then(function(){var P=O._dbInfo.mStore.get(h);return P==null?null:O._dbInfo.serializer.deserialize(P)});return A($,E),$}o(x,"I");function q(h,E){var O=this,$=this.ready().then(function(){for(var P=O._dbInfo.mStore,D=P.keys(),B=0;B<D.length;B++){var Z=P.get(D[B]);if(Z&&(Z=O._dbInfo.serializer.deserialize(Z)),Z=h(Z,D[B],B+1),Z!==void 0)return Z}});return A($,E),$}o(q,"x");function J(h,E){var O=this,$=this.ready().then(function(){var P;try{P=O._dbInfo.mStore.key(h),P===void 0&&(P=null)}catch{P=null}return P});return A($,E),$}o(J,"H");function ne(h){var E=this,O=this.ready().then(function(){return E._dbInfo.mStore.keys()});return A(O,h),O}o(ne,"j");function ae(h){var E=this.keys().then(function(O){return O.length});return A(E,h),E}o(ae,"J");function se(h,E){var O=this;h=C(h);var $=this.ready().then(function(){O._dbInfo.mStore.rm(h)});return A($,E),$}o(se,"$");function fe(h,E,O){var $=this;h=C(h);var P=this.ready().then(function(){E===void 0&&(E=null);var D=E;return new Promise(function(B,Z){$._dbInfo.serializer.serialize(E,function(Oe,we){if(we)Z(we);else try{$._dbInfo.mStore.set(h,Oe),B(D)}catch($e){Z($e)}})})});return A(P,O),P}o(fe,"ee");var Ie=!0;n._support=Ie,n._driver=s,n._initStorage=he,n.clear=N,n.dropInstance=U,n.getItem=x,n.iterate=q,n.key=J,n.keys=ne,n.length=ae,n.removeItem=se,n.setItem=fe,Object.defineProperty(n,"__esModule",{value:!0})})}),kt={};la(kt,{Magic:()=>ya});var un=st(),jt=hn(da()),ln=hn(ha()),Ke=st(),pa={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function va(e){for(let[t,n]of Object.entries(pa))e.style[t]=n}o(va,"ut");function ma(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(n=>n.src.includes(e)))}o(ma,"st");var ga=o(class extends Ke.ViewController{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(e=>{let t=o(()=>{if(ma(encodeURIComponent(this.parameters)))(0,Ke.createDuplicateIframeWarning)().log();else{let n=document.createElement("iframe");n.classList.add("magic-iframe"),n.dataset.magicIframeLabel=(0,Ke.createURL)(this.endpoint).host,n.title="Secure Modal",n.src=(0,Ke.createURL)(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,va(n),document.body.appendChild(n),e(n)}},"R");["loaded","interactive","complete"].includes(document.readyState)?t():window.addEventListener("load",t,!1)}),window.addEventListener("message",e=>{var t;if(e.origin===this.endpoint&&e.data&&e.data.msgType&&this.messageHandlers.size){e.data.response=(t=e.data.response)!=null?t:{};for(let n of this.messageHandlers.values())n(e)}})}showOverlay(){return ct(this,null,function*(){let e=yield this.iframe;e.style.display="block",this.activeElement=document.activeElement,e.focus()})}hideOverlay(){return ct(this,null,function*(){var e;let t=yield this.iframe;t.style.display="none",(e=this.activeElement)!=null&&e.focus&&this.activeElement.focus(),this.activeElement=null})}_post(e){return ct(this,null,function*(){let t=yield this.iframe;if(t&&t.contentWindow)t.contentWindow.postMessage(e,this.endpoint);else throw(0,Ke.createModalNotReadyError)()})}},"Oe");xt(kt,cn());var ya=(0,un.createSDK)(un.SDKBase,{platform:"web",sdkName:"magic-sdk",version:"8.1.1",defaultEndpoint:"https://auth.magic.link/",ViewController:ga,configureStorage:()=>ct(void 0,null,function*(){let e=jt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(ln),yield e.setDriver([jt.default.INDEXEDDB,jt.default.LOCALSTORAGE,ln._driver]),e})});pn.exports=fa(kt)});export default Ea();
//# sourceMappingURL=cjs-A2TA5REY.mjs.map